[build]
builder = "nixpacks"

[deploy]
# Servidor Express CORRIGIDO - healthcheck sempre responde, mesmo sem banco
startCommand = "npm run build && node server/express-corrected.js"
healthcheckPath = "/health"
healthcheckTimeout = 60
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

[deploy.envs]
NODE_ENV = "production"
# IMPORTANTE: Configure estas vari√°veis no painel do Railway:
# NEON_DATABASE_URL = "postgresql://user:password@host/database?sslmode=require"
# NEON_HOST = "ep-green-surf-adprt5l3-pooler.c-2.us-east-1.aws.neon.tech"
# NEON_DATABASE = "neondb"
# NEON_USER = "neondb_owner"